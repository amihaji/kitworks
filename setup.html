<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Setup User - WE Tools</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

<style>
body { 
    background-color: #f8f9fa; 
}
.table-hover tbody tr:hover { 
    background-color: #f2f2f2; 
    cursor: pointer; 
}
.actions-col { 
    width: 220px; 
    text-align: center; 
    white-space: nowrap; 
}

/************************/
/* Pengaturan Icon-icon */
/************************/
/* Default semua icon (enabled & disabled) tidak terlihat */
/* Ikon default (hidden) */
.action-icon {
    display: inline-flex;
    justify-content: center;
    align-items: center;
    width: 25px;
    height: 25px;
    opacity: 0;
    transition: opacity 0.2s, color 0.2s, background-color 0.2s;
    margin: 0 5px;
    cursor: pointer;
    color: #6c757d;
    border-radius: 50%;
    padding: 4px;
    font-size: 15px;
}

/* Saat hover ke baris, semua icon termasuk yang disabled akan muncul */
tr:hover .action-icon {
    opacity: 1;
}
/* Hover efek untuk ikon aktif */
.action-icon:hover {
    color: red;
    background-color: #e0e0e0;
}
/* Disabled icon â€“ tidak bisa diklik dan tidak bereaksi saat hover */
.action-icon.disabled {
    pointer-events: none;
    color: #bbb !important;
    background-color: transparent !important;
}

.sticky-header th { 
    position: sticky; 
    top: 0; 
    background-color: #003366; 
    color: white; 
    z-index: 2; 
    font-size:15px;
}
.title-box { 
    background-color: #003366; 
    color: white; 
    padding: 10px 15px; 
    border-radius: 5px; 
    display: flex; 
    align-items: center; 
    box-shadow: 0 2px 6px rgba(0,0,0,0.2); 
}
.title-box i { margin-right: 10px; }
.button-box { 
    background: white; 
    border-radius: 5px; 
    box-shadow: 0 2px 6px rgba(0,0,0,0.1); 
    padding: 10px; 
    margin: 15px 0; 
}
.btn-group-vertical-responsive { 
    display: flex; 
    flex-direction: row; 
    gap: 10px; 
}

.table-box { 
    background: white; 
    border-radius: 5px; 
    box-shadow: 0 2px 6px rgba(0,0,0,0.1); 
    padding: 10px; 
}
.table-wrapper { 
    max-height: 450px; 
    overflow-y: auto; 
}

/* Notifikasi Message Box */
.notification-message {
    padding: 8px 12px;
    border-radius: 4px;
    margin-bottom: 12px;
    font-size: 14px;
    display: none;
}
.pesan-notif-icon {font-size: 18px;}
.notification-error { background-color: #d9534f; color: white; }
.notification-success { background-color: #0275d8; color: white; }
.notification-warning { background-color: #f0ad4e; color: black; }

/* Animasi muncul menggeser ke bawah untuk pesan di modal */
@keyframes slideDownFade {
  from { opacity: 0; transform: translateY(-5px); }
  to { opacity: 1; transform: translateY(0); }
}
/* Pesan Notifikasi */
#pesanNotification {
  display: none;
  padding: 8px 12px;
  font-size: 14px;
  border-radius: 4px;
  margin-bottom: 12px;
  animation: slideDownFade 0.3s ease;
  display: flex;
  align-items: center;
  gap: 8px;
}

/* Spinner Untuk tabel user */
.loading-overlay {
  position: absolute;
  top: 100px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 9999;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Hak Akses */
.hak-akses-group {
  display: flex;
  flex-wrap: wrap;
  /* gap: 2px; */
  margin-top: 5px;
}
.hak-akses-item {
  display: flex;
  align-items: center;
  padding-right: 60px;
  padding-left: 3px;
}
.hak-akses-item label {
  /*margin-right:30px; */ 
  margin-left: 10px;
  /*font-weight: bold; */
  min-width: 75px;
}

/* Tampilan Vertikal */
@media (max-width: 591.98px) {
    .sticky-header th tr { 
       font-size:15px;
       white-space: nowrap !important;
    }
    
    .btn-group-vertical-responsive { 
       flex-direction: column; 
    }
    .btn-group-vertical-responsive button, .btn-group-vertical-responsive a { 
       width: 100% !important; 
    }
}

</style>
</head>

<body class="p-2 p-sm-3">
<div class="container">
<div class="title-box mb-3">
    <i class="fas fa-user-cog fa-lg"></i>
    <h6 class="mb-0">Setup User</h6>
</div>

<div class="button-box d-flex justify-content-between align-items-center btn-group-vertical-responsive">
    <button class="btn btn-primary" id="addUserButton"><i class="fas fa-plus"></i> Add User</button>
    <a href="https://amihaji.github.io/kitworks/index.html" class="btn btn-secondary"><i class="fas fa-arrow-left"></i> Close</a>
</div>

<!-- Notifikasi Pesan -->
<div id="pesanNotification" class="notification-message">
    <i id="pesanNotifIcon" class="pesan-notif-icon"></i><span id="pesanNotifText"></span>
</div>

    <div class="table-box">
        <div class="table-wrapper">
        <table class="table table-hover table-striped table-bordered align-middle text-center">
            <thead class="sticky-header">
                <tr>
                    <th style="width:6%">User id</th>
                    <th style="width:20%">Nama</th>
                    <th style="width:5%">Email</th>
                    <th style="width:5%">HP</th>
                    <th style="width:5%">Pass</th>
                    <th style="width:5%">Level</th>
                    <th style="width:5%">Salah</th>
                    <th style="width:5%">Log</th>
                    <th style="width:5%">Set</th>
                    <th style="width:5%">Flc</th>
                    <th style="width:5%">Est</th>
                    <th style="width:5%">We</th>
                    <th style="width:5%">Fol</th>
                    <th style="width:5%">Crm</th>
                    <th style="width:14%" class="actions-col">Aksi</th>
                </tr>
            </thead>
            <tbody id="userTableBody" style="font-size: small;"><tr><td colspan="15">Memuat data...</td></tr></tbody>
            <!-- Loading Overlay -->
            <div id="loadingOverlay" class="loading-overlay" style="display:none; align-content: center;">
               <div class="spinner-border text-primary" role="status"></div>
            </div>   
        </table>
        </div>
    </div>
</div>

<!-- Modal Add/Edit -->
<div class="modal fade" id="modalUser" tabindex="-1" data-mode="add">
<div class="modal-dialog">
<form id="userForm" class="modal-content">
    <div class="modal-header" style="background-color:#003366; color:white;">
        <h6 id="judulModal" class="modal-title">Tambah User</h6>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
    </div>
    <div class="modal-body">
        <input type="hidden" id="mode" value="add">
        <div class="mb-2"><label>User ID</label><input type="text" id="userId" class="form-control" required></div>
        <div class="mb-2"><label>Nama User</label><input type="text" id="userName" class="form-control" required></div>
        <div class="mb-2"><label>Email</label><input type="email" id="userEmail" class="form-control" required></div>
        <div class="mb-2"><label>HP</label><input type="text" id="userHP" class="form-control" required></div>
        <div class="mb-2"><label>Password</label><input type="text" id="userPass" class="form-control" required></div>
        <div class="mb-2"><label>Level</label>
            <select id="userLevel" class="form-select" required>
                <option value="Admin">Admin</option>
                <option value="Member">Member</option>
                <option value="User">User</option>
            </select>
        </div>
        <div class="mb-2"><label>Salah</label><input type="number" id="userSalah" class="form-control" value="0" min="0" max="3" required></div>
        <div class="form-group">
            <label>Hak Akses, pilih (Y/N):</label>
            <div class="hak-akses-group">
                <div class="hak-akses-item">
                <label>1. Login :</label>
                    <label><input type="radio" name="aksesLogin" value="Y" checked> Yes</label>
                    <label><input type="radio" name="aksesLogin" value="N"> No</label>
                </div>
                <div class="hak-akses-item">
                <label>2. Setting :</label>
                    <label><input type="radio" name="aksesSetting" value="Y" checked> Yes</label>
                    <label><input type="radio" name="aksesSetting" value="N"> No</label>
                </div>
                <div class="hak-akses-item">
                <label>3. FLC :</label>
                    <label><input type="radio" name="aksesFLC" value="Y" checked> Yes</label>
                    <label><input type="radio" name="aksesFLC" value="N"> No</label>
                </div>
                <div class="hak-akses-item">
                <label>4. EstiH :</label>
                    <label><input type="radio" name="aksesEstiH" value="Y" checked> Yes</label>
                    <label><input type="radio" name="aksesEstiH" value="N"> No</label>
                </div>
                <div class="hak-akses-item">
                <label>5. WE :</label>
                    <label><input type="radio" name="aksesWE" value="Y" checked> Yes</label>
                    <label><input type="radio" name="aksesWE" value="N"> No</label>
                </div>
                <div class="hak-akses-item">
                <label>6. Follow :</label>
                    <label><input type="radio" name="aksesFollow" value="Y" checked> Yes</label>
                    <label><input type="radio" name="aksesFollow" value="N"> No</label>
                </div>
                <div class="hak-akses-item">
                <label>7. CRM :</label>
                    <label><input type="radio" name="aksesCRM" value="Y" checked> Yes</label>
                    <label><input type="radio" name="aksesCRM" value="N"> No</label>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="submit" class="btn btn-primary" id="saveUserBtn">Simpan</button>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
    </div>
</form>
</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<SCRIPT>
// ********* Deklarasi  Public **********
const URL_APPS_SCRIPT = 'https://script.google.com/macros/s/AKfycbztnAT9SLVsyP9Jk7QYaxrhfRBIlpwjpGQPrDFzReIPnqBjJntSCMuRUtRC_qNlS4cRhQ/exec';
// **************************************

// Tampilkan Loading Overlay
function showLoading(show) {
  const overlay = document.getElementById('loadingOverlay');
  if (overlay) overlay.style.display = show ? 'flex' : 'none';
}

document.addEventListener('DOMContentLoaded', loadUserTable);
  document.getElementById('addUserButton').addEventListener('click', () => {
  document.getElementById('mode').value = 'add';
  document.getElementById('userForm').reset();
  // document.getElementById('userId').readOnly = false;
  document.getElementById('userId').disabled = false;
  document.getElementById('judulModal').textContent = 'INPUT USER';
  new bootstrap.Modal(document.getElementById('modalUser')).show();
});

// LOAD DATA USER
function loadUserTable() {
    showLoading(true);  
    const callbackName = 'cb_' + Date.now();
    const script = document.createElement('script');
    script.src = `${URL_APPS_SCRIPT}?action=getTabelUser&callback=${callbackName}`;

    window[callbackName] = function(data) {
        const tbody = document.getElementById('userTableBody');
        tbody.innerHTML = '';

        if (!data || data.length === 0) {
            tbody.innerHTML = '<tr><td colspan="14">Tidak ada data user.</td></tr>';
            showLoading(false); 
            return;
        }

        data.forEach(row => {
            const [userId, namaUser, emailUser, hpUser, passUser, levelUser, salah,
                login, setting, flc, estih, we, followup, crm] = row;

            let editState   = '';
            let deleteState = '';
            let unlockState = 'disabled';
            let kirimState  = 'disabled';

            const salahCount = parseInt(salah) || 0;
            const unlockFlag = localStorage.getItem('notifReady_' + userId);

            if (salahCount >= 3) {
                editState   = 'disabled';
                deleteState = 'disabled';
                unlockState = '';
                kirimState  = 'disabled';
            } else if (unlockFlag === 'true') {
                editState   = 'disabled';
                deleteState = 'disabled';
                unlockState = 'disabled';
                kirimState  = '';
            }

            const tr = document.createElement('tr');
            tr.id = `row_${userId}`; // Untuk mengupdate baris record di tabel 

            tr.innerHTML = `
                <td>${userId}</td>
                <td>${namaUser}</td>
                <td>${emailUser}</td>
                <td>${hpUser}</td>
                <td>${passUser}</td>
                <td>${levelUser}</td>
                <td>${salah}</td>
                <td>${login}</td>
                <td>${setting}</td>
                <td>${flc}</td>
                <td>${estih}</td>
                <td>${we}</td>
                <td>${followup}</td>
                <td>${crm}</td>
                <td class="actions-col">
                    <!-- <i class="fas fa-edit action-icon ${editState}" title="Edit User" onclick="editUser('${userId}')"></i> -->
                    <i class="fas fa-edit action-icon" title="Edit" onclick="showEditModal({
                        userId: '${userId}',     
                        userName: '${namaUser}', 
                        userEmail: '${emailUser}', 
                        userHP: '${hpUser}',
                        userPass: '${passUser}', 
                        userLevel: '${levelUser}',
                        aksesLogin: '${login}', 
                        aksesSetting: '${setting}', 
                        aksesFLC: '${flc}',
                        aksesEstiH: '${estih}', 
                        aksesWE: '${we}', 
                        aksesFollowup: '${followup}', 
                        aksesCRM: '${crm}'
                    })"></i>

                    <i class="fas fa-trash-alt action-icon ${deleteState}" title="Hapus User" onclick="deleteUser('${userId}')"></i>
                    <i class="fas fa-unlock action-icon ${unlockState}" title="Unlock User" onclick="unlockUser('${userId}')"></i>
                    <i class="fas fa-paper-plane action-icon ${kirimState}" title="Kirim Notifikasi" onclick="sendNotif('${userId}','${namaUser}','${emailUser}','${hpUser}','${passUser}')"></i>
                </td>
            `;

            tbody.appendChild(tr);
        });
        showLoading(false);  
        delete window[callbackName];
        document.body.removeChild(script);
    };

    script.onerror = function() {
        showPesan('error','ERROR : Gagal mengambil data user!');
        showLoading(false);
        delete window[callbackName];
    };
    document.body.appendChild(script);
}

function addUser() {
    const userId     = document.getElementById('userId').value.trim();
    const userName   = document.getElementById('userName').value.trim();
    const userEmail  = document.getElementById('userEmail').value.trim();
    const userHP     = document.getElementById('userHP').value.trim();
    const userPass   = document.getElementById('userPass').value.trim();
    const userLevel  = document.getElementById('userLevel').value.trim();

    // Ambil nilai radio Y/N untuk setiap hak akses
    const aksesLogin    = document.querySelector('input[name="aksesLogin"]:checked')?.value || 'N';
    const aksesSetting  = document.querySelector('input[name="aksesSetting"]:checked')?.value || 'N';
    const aksesFLC      = document.querySelector('input[name="aksesFLC"]:checked')?.value || 'N';
    const aksesEstiH    = document.querySelector('input[name="aksesEstiH"]:checked')?.value || 'N';
    const aksesWE       = document.querySelector('input[name="aksesWE"]:checked')?.value || 'N';
    const aksesFollowup = document.querySelector('input[name="aksesFollowup"]:checked')?.value || 'N';
    const aksesCRM      = document.querySelector('input[name="aksesCRM"]:checked')?.value || 'N';

    if (!userId || !userName || !userPass) {
        showPesan('warning','WARNING : Harap lengkapi data user !');
        return;
    }

    // Cek Agare user ID Tidak duplikasi atau sudah ada di tabel
    const existingRows = document.querySelectorAll('#userTableBody tr');
    for (let row of existingRows) {
    const cellUserId = row.children[0]?.textContent?.trim();
    if (cellUserId === userId) {
        showPesan('warning','WARNING : User ID sudah digunakan !');
        return;
    }
    }

    const callbackName = 'cb_' + Date.now();
    window[callbackName] = function(response) {
        if (response.success) {
            showPesan('success', 'SUKSES : Menyimpan ' + response.message);
            bootstrap.Modal.getInstance(document.getElementById("modalUser")).hide();  // Tutup modal
            loadUserTable(); // refresh tabel
        } else {
            showPesan('error','ERROR : Gagal menyimpan data user');
        }
        delete window[callbackName];
    };

    const script = document.createElement('script');
    const baseUrl = URL_APPS_SCRIPT;
    const params = new URLSearchParams({
        action: 'addUser',
        userId, userName, userEmail, userHP, userPass, userLevel,
        aksesLogin, aksesSetting, aksesFLC, aksesEstiH, aksesWE, aksesFollowup, aksesCRM,
        callback: callbackName
    });

    script.src = `${baseUrl}?${params.toString()}`;
    document.body.appendChild(script);
    bootstrap.Modal.getInstance(document.getElementById("modalUser")).hide();
}

// EDIT USER MODAL
function editUser() {
  const userId    = document.getElementById('userId').value.trim();
  const userName  = document.getElementById('userName').value.trim();
  const userEmail = document.getElementById('userEmail').value.trim();
  const userHP    = document.getElementById('userHP').value.trim();
  const userPass  = document.getElementById('userPass').value.trim();
  const userLevel = document.getElementById('userLevel').value.trim();

  const aksesLogin    = document.querySelector('input[name="aksesLogin"]:checked')?.value || 'N';
  const aksesSetting  = document.querySelector('input[name="aksesSetting"]:checked')?.value || 'N';
  const aksesFLC      = document.querySelector('input[name="aksesFLC"]:checked')?.value || 'N';
  const aksesEstiH    = document.querySelector('input[name="aksesEstiH"]:checked')?.value || 'N';
  const aksesWE       = document.querySelector('input[name="aksesWE"]:checked')?.value || 'N';
  const aksesFollowup = document.querySelector('input[name="aksesFollowup"]:checked')?.value || 'N';
  const aksesCRM      = document.querySelector('input[name="aksesCRM"]:checked')?.value || 'N';

  if (!userId || !userName || !userPass) {
    showPesan("warning","WARNING : Lengkapi data sebelum simpan !");
    return;
  }

  const callbackName = 'cb_' + Date.now();
  window[callbackName] = function(res) {
    if (res.status === "success") {
       showPesan("success", res.message || "SUKSES : Data berhasil diupdate");
       bootstrap.Modal.getInstance(document.getElementById("modalUser")).hide();
       loadUserTable();
       // Reset mode ke add
       document.getElementById("modalUser").setAttribute("data-mode", "add"); 

    } else {
       showPesan("error", res.message || "ERROR : Gagal update data");
    }
    delete window[callbackName];
  };

  const params = new URLSearchParams({
    action: 'editUser',
    userId, userName, userEmail, userHP, userPass, userLevel,
    aksesLogin, aksesSetting, aksesFLC, aksesEstiH, aksesWE, aksesFollowup, aksesCRM,
    callback: callbackName
  });

  const script = document.createElement("script");
  script.src = `${URL_APPS_SCRIPT}?${params.toString()}`;
  document.body.appendChild(script);
}

function deleteUser(userId) {
  if (!confirm("Yakin ingin menghapus user ini?")) return;

  const callback = 'cb_' + Date.now();
  window[callback] = function(response) {
    // showPesan(response.message, response.status === 'success' ? 'success' : 'error');
    if (response.status === 'success') {
       showPesan('success', "SUKSES : " + response.message);
       loadUserTable(); // Refresh tabel
    }
    delete window[callback];
  };

  const script = document.createElement('script');
  script.src = `${URL_APPS_SCRIPT}?action=deleteUser&userId=${encodeURIComponent(userId)}&callback=${callback}`;
  document.body.appendChild(script);
}

function unlockUser(userId) {
  if (!confirm("Anda yakin untuk unlock user ini?")) return;
  const callbackName = 'cbUnlock_' + Date.now();
  window[callbackName] = (res) => {
    if (res.status === 'success') {
      showPesan('success', "SUKSES : " + res.message);
      localStorage.setItem('notifReady_' + userId, 'true');
      const row = document.getElementById(`row_${userId}`);
      if (row) {
        const cols = row.getElementsByTagName('td');
        if (cols.length >= 7) cols[6].textContent = '0';
        row.querySelector('.fa-edit')?.classList.add('disabled');
        row.querySelector('.fa-trash-alt')?.classList.add('disabled');
        row.querySelector('.fa-unlock')?.classList.add('disabled');
        row.querySelector('.fa-paper-plane')?.classList.remove('disabled');
      }
    } else showPesan('error', "ERROR : Reset Login gagal " + res.message);
      delete window[callbackName];
  };
  const script = document.createElement('script');
  script.src = `${URL_APPS_SCRIPT}?action=unlockUser&userId=${encodeURIComponent(userId)}&callback=${callbackName}`;
  document.body.appendChild(script);
}

function sendNotif(userId, userName, userEmail, userHP, userPass) {
    console.log("Mengirim notifikasi ke:", userId, userName, userEmail, userHP, userPass);

    const callback = 'cb_' + Date.now();
    const script = document.createElement('script');
    script.src = `${URL_APPS_SCRIPT}?action=sendNotifUser` +
        `&userId=${encodeURIComponent(userId)}` +
        `&userName=${encodeURIComponent(userName)}` +
        `&userEmail=${encodeURIComponent(userEmail)}` +
        `&userHP=${encodeURIComponent(userHP)}` +
        `&userPass=${encodeURIComponent(userPass)}` +
        `&callback=${callback}`;

    window[callback] = function (response) {
        console.log("Respon kirim:", response);
        if (response.status === 'success') {
            showPesan('success', "SUKSES : " + response.message);
            localStorage.removeItem('notifReady_' + userId);
            loadUserTable(); // reload tampilan icon
        } else {
            showPesan('error', "ERROR : " + response.message);
        }

        delete window[callback];
        document.body.removeChild(script);
    };

    script.onerror = () => {
        showPesan('error', "ERROR : Gagal terhubung ke server");
        delete window[callback];
        document.body.removeChild(script);
    };

    document.body.appendChild(script);
}

function updateRowIcons(row, mode) {
    const icons = row.querySelectorAll('.action-icon');
    const [editIcon, delIcon, unlockIcon, kirimIcon] = icons;

    if (mode === 'unlock') {
        editIcon.classList.add('disabled');
        delIcon.classList.add('disabled');
        unlockIcon.classList.add('disabled');
        kirimIcon.classList.remove('disabled');
    } else if (mode === 'kirim') {
        editIcon.classList.remove('disabled');
        delIcon.classList.remove('disabled');
        unlockIcon.classList.add('disabled');
        kirimIcon.classList.add('disabled');
    }
}

// Pesan Notifikasi  
function showPesan(type, message, duration = 3000) {
  const box  = document.getElementById('pesanNotification');
  const icon = document.getElementById('pesanNotifIcon');
  const text = document.getElementById('pesanNotifText');

  // Reset class
  box.className  = 'notification-message';
  icon.className = 'pesan-notif-icon';

  if (type === 'error') {
    box.classList.add('notification-error');
    icon.classList.add('fas', 'fa-times-circle');
  } else if (type === 'success') {
    box.classList.add('notification-success');
    icon.classList.add('fas', 'fa-check-circle');
  } else if (type === 'warning') {
    box.classList.add('notification-warning');
    icon.classList.add('fas', 'fa-exclamation-circle');
  }
  text.textContent  = message;
  box.style.display = 'flex';
  setTimeout(() => {box.style.display = 'none';}, duration);
}

document.getElementById("saveUserBtn").addEventListener("click", (e) => {
   e.preventDefault();
   const mode = document.getElementById("modalUser").getAttribute("data-mode");
   if (mode === "edit") {
     editUser(); // Panggil fungsi edit
   } else {
     addUser(); // Panggil fungsi tambah
   }
});

function showEditModal(userData) {
  // Isi input dari userData
  document.getElementById('judulModal').textContent = 'EDIT USER';
  document.getElementById('userId').disabled = true;
  document.getElementById("userId").value    = userData.userId;
  document.getElementById("userName").value  = userData.userName;
  document.getElementById("userEmail").value = userData.userEmail;
  document.getElementById("userHP").value    = userData.userHP;
  document.getElementById("userPass").value  = userData.userPass;
  document.getElementById("userLevel").value = userData.userLevel;

  // Set radio akses
  const akses = ['Login','Setting','FLC','EstiH','WE','Followup','CRM'];
  akses.forEach(aksesName => {
    const val   = userData['akses'+aksesName] || 'N';
    const radio = document.querySelector(`input[name="akses${aksesName}"][value="${val}"]`);
    if (radio) radio.checked = true;
  });

  // Tampilkan modal & ubah mode
  document.getElementById("modalUser").setAttribute("data-mode", "edit");
  new bootstrap.Modal(document.getElementById("modalUser")).show();
}

</SCRIPT>
</body>
</html>
